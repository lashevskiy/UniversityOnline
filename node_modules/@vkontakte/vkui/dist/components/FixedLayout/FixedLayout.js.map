{"version":3,"sources":["../../../src/components/FixedLayout/FixedLayout.js"],"names":["baseClassNames","FixedLayout","position","top","e","panelScroll","detail","scrolls","context","panel","setState","el","offsetTop","props","getRootRef","document","addEventListener","transitionStartEventName","onViewTransitionStart","transitionEndEventName","onViewTransitionEnd","removeEventListener","className","children","style","vertical","insets","restProps","tabbarPadding","hasTabbar","tabbarHeight","paddingBottom","isNaN","bottom","getRef","state","React","Component","PropTypes","node","object","string","func","oneOf","any","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport getClassName from '../../helpers/getClassName';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport { transitionEndEventName, transitionStartEventName } from '../View/View';\nimport { tabbarHeight } from '../../appearance/constants';\nimport withInsets from '../../hoc/withInsets';\n\nconst baseClassNames = getClassName('FixedLayout');\n\nclass FixedLayout extends React.Component {\n  state = {\n    position: null,\n    top: null\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    getRootRef: PropTypes.func,\n    vertical: PropTypes.oneOf(['top', 'bottom']),\n    /**\n     * @ignore\n     */\n    insets: PropTypes.object\n  };\n\n  static contextTypes = {\n    panel: PropTypes.string,\n    document: PropTypes.any,\n    hasTabbar: PropTypes.bool\n  };\n\n  get document () {\n    return this.context.document || document;\n  }\n\n  componentDidMount () {\n    this.document.addEventListener(transitionStartEventName, this.onViewTransitionStart);\n    this.document.addEventListener(transitionEndEventName, this.onViewTransitionEnd);\n  }\n\n  componentWillUnmount () {\n    this.document.removeEventListener(transitionStartEventName, this.onViewTransitionStart);\n    this.document.removeEventListener(transitionEndEventName, this.onViewTransitionEnd);\n  }\n\n  onViewTransitionStart = (e) => {\n    let panelScroll = e.detail.scrolls[this.context.panel] || 0;\n    this.setState({\n      position: 'absolute',\n      top: this.el.offsetTop + panelScroll\n    });\n  };\n\n  onViewTransitionEnd = () => {\n    this.setState({\n      position: null,\n      top: null\n    });\n  };\n\n  getRef = el => {\n    if (this.props.getRootRef) {\n      this.props.getRootRef(el);\n    }\n    this.el = el;\n  };\n\n  render () {\n    const { className, children, style, vertical, getRootRef, insets, ...restProps } = this.props;\n    const tabbarPadding = this.context.hasTabbar ? tabbarHeight : 0;\n    const paddingBottom = vertical === 'bottom' && !isNaN(insets.bottom) ? insets.bottom + tabbarPadding : null;\n\n    return (\n      <div\n        {...restProps}\n        ref={this.getRef}\n        className={classNames(baseClassNames, { [`FixedLayout--${vertical}`]: vertical }, className)}\n        style={{ ...style, ...this.state, paddingBottom }}\n      >\n        <div className=\"FixedLayout__in\">{children}</div>\n      </div>\n    );\n  }\n}\n\nexport default withInsets(FixedLayout);\n"],"file":"FixedLayout.js"}